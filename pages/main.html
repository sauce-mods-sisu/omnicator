<!DOCTYPE html>
<html id="omnicator" tabindex="0" data-settings-key="translingua-zwift">
  <head>
    <meta charset="utf-8" />
    <title>Omnicator</title>
    <link rel="stylesheet" href="css/main.css" />
  </head>
  <body id="chats-output">
    <!-- API Key Modal (hidden by default) -->
    <div id="api-key-modal" class="hidden">
      <div class="modal-content">
        <h2>
          Enter your ChatGPT API Key
          <span class="tooltip" data-tooltip="Stores your ChatGPT for the duration of the window session only.">?</span>
        </h2>
        <input type="password" id="api-key-input" placeholder="API Key" />
        <button id="save-api-key-btn" class="header-btn">Store API Key for the Session Only</button>
      </div>
    </div>

    <!-- Fixed header with configuration menu and stats -->
    <div class="hud-header">
      <div class="menu">
        <button class="header-btn" id="config-btn">Config</button>
      </div>
      <div class="stats">
        <span id="token-count">Tokens Used: 0</span>
        <span id="estimated-cost">Estimated Cost: $0.00</span>
      </div>
    </div>

    <!-- Chat messages container -->
    <div id="chat-messages">
      <!-- Messages will be appended dynamically -->
    </div>

    <!-- Configuration Panel -->
    <div id="config-panel" class="hidden">
      <div class="config-content">
        <button class="header-btn" id="close-config-btn">×</button>
        <h2>Configuration</h2>
        <form id="config-form">
          <div class="form-inline-group">
            <div class="form-group">
              <label for="message-timeout">
                Msg Timeout:
                <span class="tooltip" data-tooltip="Duration, in seconds, the message will stay in the chat window">?</span>
              </label>
              <input type="number" id="message-timeout" name="message-timeout" step="any" />
            </div>
            <div class="form-group">
              <label for="message-limit">Msg Limit:
                <span class="tooltip" data-tooltip="Maximum number of chat messages allowed in the window">?</span>
              </label>
              <input type="number" id="message-limit" name="message-limit" step="any" />
            </div>
            <div class="form-group">
              <label for="cost-per-token-input">
                Cost/Token:
                <span class="tooltip" data-tooltip="ChatGPT consumed tokens are tracked accurately, but there isn't a good way to know your cost per token, enter it here.">?</span>
              </label>
              <input type="number" id="cost-per-token-input" name="cost-per-token-input" step="any" />
            </div>
          </div>
          <div class="form-group">
            <label for="language-select">Your Language:</label>
            <select id="language-select">
              <option value="English">English - English</option>
              <option value="Spanish">Spanish - Español</option>
              <option value="French">French - Français</option>
              <option value="Chinese">Chinese - 中文</option>
              <option value="Japanese">Japanese - 日本語</option>
              <option value="Dutch">Dutch - Nederlands</option>
              <option value="German">German - Deutsch</option>
              <option value="Arabic">Arabic - العربية</option>
              <option value="Czech">Czech - Čeština</option>
            </select>            
          </div>          
          <div class="form-group">
            <label for="excluded-country-codes-input">
              Exclude Countries:
              <span class="tooltip" data-tooltip="Select the country of origin of the speaker for which translation should be disabled.">?</span>
            </label>
            <div class="exclude-control">
              <!-- Dropdown for selecting a country to exclude -->
              <select id="excluded-country-codes-input" name="excluded-country-codes-input">
                <!-- Options will be populated by JavaScript -->
              </select>
              <button type="button" class="header-btn" id="add-excluded-btn">Add</button>
            </div>
          </div>
          <div id="excluded-country-pills">
            <!-- Pills will appear here -->
          </div>
          <button class="header-btn" id="save-config-btn">Save</button>
        </form>
      </div>
    </div>

    <script type="module" src="src/main.mjs"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">

  </body>
</html>
